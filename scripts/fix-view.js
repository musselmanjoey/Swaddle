// Fix Database View Script\nconst { Pool } = require('pg');\nconst fs = require('fs');\nconst path = require('path');\n\n// Load environment variables\nrequire('dotenv').config({ path: path.join(__dirname, '../.env.local') });\n\nasync function fixView() {\n  const pool = new Pool({\n    host: process.env.DB_HOST || 'localhost',\n    port: process.env.DB_PORT || 5432,\n    database: process.env.DB_NAME || 'swaddle',\n    user: process.env.DB_USER || 'postgres',\n    password: process.env.DB_PASSWORD || ''\n  });\n\n  try {\n    console.log('üîß [FIX] Fixing track_recommendation_data view...');\n    \n    // Read fix SQL\n    const fixSQL = fs.readFileSync(path.join(__dirname, 'fix-view.sql'), 'utf8');\n    \n    // Execute fix\n    await pool.query(fixSQL);\n    \n    console.log('‚úÖ [FIX] View fixed successfully!');\n    \n    // Test the view\n    const testResult = await pool.query('SELECT COUNT(*) as count FROM track_recommendation_data LIMIT 1');\n    console.log(`üß™ [FIX] View test successful - can access track_recommendation_data`);\n    \n  } catch (error) {\n    console.error('‚ùå [FIX] Fix failed:', error.message);\n    throw error;\n  } finally {\n    await pool.end();\n    console.log('üîí [FIX] Database connection closed');\n  }\n}\n\nfixView().catch(console.error);